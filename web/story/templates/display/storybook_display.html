{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <title>童話工廠 Social Features</title>
    <link rel="stylesheet" href="{% static 'css/background.css' %}" />
    <link rel="stylesheet" href="{% static 'css/display/storybook_display.css' %}" />
  </head>
  <body>
    <div class="story-Y4U">
      <div class="group-13-Tx8">
        <img class="vector-PKz" src="{% static 'img/web_page/vector/previous page.png' %}" />
      </div>
      <div class="auto-group-kqbn-KzL">
        <img class="rectangle-10-GPn" src="{% static 'img/web_page/background/enchanted kingdom.png' %}" />
        <div class="item--D48">.....的故事</div>
        <div class="item--tRA" id="page_no"></div>
        <div class="item--tRB" id="article_content">
          {% for paragraph in article_list %}
            <p>{{ paragraph }}</p>
          {% endfor %}
        </div>
        <div class="group-10-Ff2" id="home_button">回到首頁</div>
        <div class="group-11-j4Q" id="save_button">SAVE</div>
        <div class="group-12-bsJ">
          <img class="vector-KHW" src="{% static 'img/web_page/vector/next page.png' %}" id="next_page_button" />
        </div>
        <div class="group-11-eqa" id="home_pop_up" style="display: none;">
          <div class="item--8kk">
            確認是否回到首頁？
            <br />
          </div>
          <div class="item--9kk"></div>
          <img class="done-outline-dhW" id="check_home_button" src="{% static 'img/web_page/vector/check.png' %}" />
        </div>
        <div class="group-11-eqa" id="save_pop_up" style="display: none;">
          <div class="item--8kk">
            確認是否儲存？
            <br />
          </div>
          <div class="item--9kk"></div>
          <img class="done-outline-dhW" id="check_save_button" src="{% static 'img/web_page/vector/check.png' %}" />
        </div>
        <div class="group-12-eqa" id="save_successful_pop_up" style="display: none;">
          <div class="item--8kk">
            儲存成功！
            <br />
          </div>
          <div class="item--9kk"></div>
        </div>
      </div>
    </div>
    <script>
document.addEventListener("DOMContentLoaded", function() {
    var pageNumberElement = document.getElementById('page_no');
    var articleContentElement = document.getElementById('article_content');

    var homeButton = document.getElementById('home_button');
    var nextPageButton = document.getElementById('next_page_button');

    var articleList = JSON.parse('{{ article_list_json|escapejs }}');
    var totalPageCount = articleList.length; 

    var pageNumber = 1;
    pageNumberElement.textContent = pageNumber;
    articleContentElement.innerHTML = articleList[pageNumber - 1];

    homeButton.addEventListener('click', function() {
       
        document.getElementById('home_pop_up').style.display = 'block';
    });

    document.getElementById('check_home_button').addEventListener('click', function() {
        pageNumber = 1;
        pageNumberElement.textContent = pageNumber;
        
        articleContentElement.innerHTML = articleList[pageNumber - 1];
        
        document.getElementById('home_pop_up').style.display = 'none';
    });

    nextPageButton.addEventListener('click', function() {
        if (pageNumber < totalPageCount) { 
            pageNumber++;
            pageNumberElement.textContent = pageNumber;
            
            articleContentElement.innerHTML = articleList[pageNumber - 1];
            
            window.history.pushState(null, '', '/story/storybookdisplay?page=' + pageNumber);
        } else {
            
            articleContentElement.innerHTML = '故事结束';
            
            nextPageButton.style.display = 'none';
        }
    });

    document.getElementsByClassName("group-12-bsJ")[0].addEventListener("click", function () {
        if (pageNumber < totalPageCount) {
            pageNumber++;
            pageNumberElement.textContent = pageNumber;
            articleContentElement.innerHTML = articleList[pageNumber - 1];
            window.history.pushState(null, '', '/story/storybookdisplay?page=' + pageNumber);
        } else {
            
            articleContentElement.innerHTML = '故事结束';

            nextPageButton.style.display = 'none';
        }
    });

    document.getElementsByClassName("group-13-Tx8")[0].addEventListener("click", function () {
        if (pageNumber > 1) {
            pageNumber--;
            pageNumberElement.textContent = pageNumber;
            articleContentElement.innerHTML = articleList[pageNumber - 1];
            window.history.pushState(null, '', '/story/storybookdisplay?page=' + pageNumber);
        }
    });
});
  </script>
  </body>
</html>
